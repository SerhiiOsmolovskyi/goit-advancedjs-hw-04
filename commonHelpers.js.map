{"version":3,"file":"commonHelpers.js","sources":["../src/script.js"],"sourcesContent":["import axios from 'axios';\nimport Notiflix from 'https://cdn.skypack.dev/notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst apiKey = '40911756-f65b6d1dd8fe00ae3d3aa7e29';\nconst API_URL = 'https://pixabay.com/api/';\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet page = 1;\n\n// Оголосіть lightbox як глобальну змінну\nconst lightbox = new SimpleLightbox('.gallery a');\n\nsearchForm.addEventListener('submit', async function (e) {\n  e.preventDefault();\n  const searchQuery = e.target.searchQuery.value.trim();\n\n  if (searchQuery === '') {\n    return;\n  }\n\n  page = 1;\n\n  try {\n    const images = await fetchImages(searchQuery, page);\n    renderImages(images);\n    console.log('render');\n    lightbox.refresh();\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  }\n});\n\nloadMoreBtn.addEventListener('click', async function () {\n  const searchQuery = searchForm.searchQuery.value.trim();\n\n  if (searchQuery === '') {\n    return;\n  }\n\n  try {\n    page++;\n    const images = await fetchImages(searchQuery, page);\n    renderImages(images);\n    lightbox.refresh();\n  } catch (error) {\n    console.error('Error fetching more images:', error);\n  }\n});\n\nasync function fetchImages(query, page) {\n  try {\n    const response = await axios.get(API_URL, {\n      params: {\n        key: apiKey,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 40,\n      },\n    });\n\n    const { hits, totalHits } = response.data;\n\n    if (totalHits === 0) {\n      Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      hideLoadMoreButton();\n      return [];\n    }\n\n    Notiflix.Notify.success(`Hooray! We found ${totalHits} images.`);\n    showLoadMoreButton();\n\n    return hits;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    Notiflix.Notify.failure(\n      'An error occurred while fetching images. Please try again.'\n    );\n    return [];\n  }\n}\n\nfunction renderImages(images) {\n  if (page === 1) {\n    gallery.innerHTML = '';\n  }\n\n  images.forEach(image => {\n    const card = createImageCard(image);\n    gallery.appendChild(card);\n  });\n\n  showLoadMoreButton();\n  updateImageWidth();\n\n  lightbox.refresh();\n}\n\nfunction createImageCard(image) {\n  const card = document.createElement('div');\n  card.classList.add('photo-card');\n\n  const img = document.createElement('img');\n  img.src = image.webformatURL;\n  img.alt = image.tags;\n  img.loading = 'lazy';\n\n  const info = document.createElement('div');\n  info.classList.add('info');\n  info.innerHTML = `\n        <p class=\"info-item\"><b>Likes:</b> <span>${image.likes}</span></p>\n        <p class=\"info-item\"><b>Views:</b> <span>${image.views}</span></p>\n        <p class=\"info-item\"><b>Comments:</b> <span>${image.comments}</span></p>\n        <p class=\"info-item\"><b>Downloads:</b> <span>${image.downloads}</span></p>\n    `;\n    const link = document.createElement('a');\n    link.href = image.webformatURL; // Додайте цей рядок\n    link.appendChild(img);\n\n    card.appendChild(link);\nlink.href = image.webformatURL; \n  link.appendChild(img);\n\n  card.appendChild(link);\n  card.appendChild(info);\n\n  info.style.display = 'flex';\n  info.style.width = '25%';\n  info.style.gap = '5px';\n  info.style.fontSize = '0.6em';\n  info.style.textAlign = 'center';\n\n  return card;\n}\n\nfunction showLoadMoreButton() {\n  loadMoreBtn.style.display = 'block';\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreBtn.style.display = 'none';\n}\n\nfunction updateImageWidth() {\n  const photoCards = document.querySelectorAll('.photo-card');\n\n  photoCards.forEach(card => {\n    const img = card.querySelector('img');\n    const containerWidth = card.clientWidth;\n\n    img.style.width = containerWidth + 'px';\n  });\n}"],"names":["apiKey","API_URL","searchForm","gallery","loadMoreBtn","page","lightbox","SimpleLightbox","e","searchQuery","images","fetchImages","renderImages","error","query","response","axios","hits","totalHits","Notiflix","hideLoadMoreButton","showLoadMoreButton","image","card","createImageCard","updateImageWidth","img","info","link","containerWidth"],"mappings":"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"}