{"version":3,"file":"commonHelpers.js","sources":["../src/script.js"],"sourcesContent":["import axios from 'axios';\nimport Notiflix from 'https://cdn.skypack.dev/notiflix';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst apiKey = '40911756-f65b6d1dd8fe00ae3d3aa7e29';\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet page = 1;\nconst lightbox = new SimpleLightbox('.gallery a');\n\nsearchForm.addEventListener('submit', async function (e) {\n    e.preventDefault();\n    const searchQuery = e.target.searchQuery.value.trim();\n\n    if (searchQuery === '') {\n        return;\n    }\n\n    page = 1;\n\n    try {\n        const images = await fetchImages(searchQuery, page);\n        renderImages(images);\n        lightbox.refresh();\n    } catch (error) {\n        console.error('Error fetching images:', error);\n    }\n});\n\nloadMoreBtn.addEventListener('click', async function () {\n    const searchQuery = searchForm.searchQuery.value.trim();\n\n    if (searchQuery === '') {\n        return;\n    }\n\n    try {\n        page++;\n        const images = await fetchImages(searchQuery, page);\n        renderImages(images);\n        lightbox.refresh();\n    } catch (error) {\n        console.error('Error fetching more images:', error);\n    }\n});\n\nasync function fetchImages(query, page) {\n    const response = await axios.get('https://pixabay.com/api/', {\n        params: {\n            key: apiKey,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: 40,\n        },\n    });\n\n    if (response.data.totalHits === 0) {\n        Notiflix.Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n        hideLoadMoreButton();\n        return [];\n    }\n\n    Notiflix.Notify.success(`Hooray! We found ${response.data.totalHits} images.`);\n    showLoadMoreButton();\n\n    return response.data.hits;\n}\n\nfunction renderImages(images) {\n    if (page === 1) {\n        gallery.innerHTML = '';\n    }\n\n    images.forEach((image) => {\n        const card = createImageCard(image);\n        gallery.appendChild(card);\n    });\n\n    showLoadMoreButton();\n    updateImageWidth();\n}\n\nfunction createImageCard(image) {\n    const card = document.createElement('div');\n    card.classList.add('photo-card');\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n    img.loading = 'lazy';\n\n    const info = document.createElement('div');\n    info.classList.add('info');\n    info.innerHTML = `\n        <p class=\"info-item\"><b>Likes:</b> <span>${image.likes}</span></p>\n        <p class=\"info-item\"><b>Views:</b> <span>${image.views}</span></p>\n        <p class=\"info-item\"><b>Comments:</b> <span>${image.comments}</span></p>\n        <p class=\"info-item\"><b>Downloads:</b> <span>${image.downloads}</span></p>\n    `;\n\n    card.appendChild(img);\n    card.appendChild(info);\n\n    info.style.display = 'flex';\n    info.style.width = '25%';\n    info.style.gap = '5px';\n\n    info.style.fontSize = '12px';\n    info.style.textAlign = 'center';\n\n    return card;\n}\n\nfunction showLoadMoreButton() {\n    loadMoreBtn.style.display = 'block';\n}\n\nfunction hideLoadMoreButton() {\n    loadMoreBtn.style.display = 'none';\n}\n\nfunction updateImageWidth() {\n    const photoCards = document.querySelectorAll('.photo-card');\n\n    photoCards.forEach((card) => {\n        const img = card.querySelector('img');\n        const containerWidth = card.clientWidth;\n\n        img.style.width = containerWidth + 'px';\n    });\n}\n\n"],"names":["apiKey","searchForm","gallery","loadMoreBtn","page","lightbox","SimpleLightbox","e","searchQuery","images","fetchImages","renderImages","error","query","response","axios","Notiflix","hideLoadMoreButton","showLoadMoreButton","image","card","createImageCard","updateImageWidth","img","info","containerWidth"],"mappings":"6yBAKA,MAAMA,EAAS,qCACTC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIC,EAAO,EACX,MAAMC,EAAW,IAAIC,EAAe,YAAY,EAEhDL,EAAW,iBAAiB,SAAU,eAAgBM,EAAG,CACrDA,EAAE,eAAc,EAChB,MAAMC,EAAcD,EAAE,OAAO,YAAY,MAAM,OAE/C,GAAIC,IAAgB,GAIpB,CAAAJ,EAAO,EAEP,GAAI,CACA,MAAMK,EAAS,MAAMC,EAAYF,EAAaJ,CAAI,EAClDO,EAAaF,CAAM,EACnBJ,EAAS,QAAO,CACnB,OAAQO,EAAP,CACE,QAAQ,MAAM,yBAA0BA,CAAK,CAChD,EACL,CAAC,EAEDT,EAAY,iBAAiB,QAAS,gBAAkB,CACpD,MAAMK,EAAcP,EAAW,YAAY,MAAM,KAAI,EAErD,GAAIO,IAAgB,GAIpB,GAAI,CACAJ,IACA,MAAMK,EAAS,MAAMC,EAAYF,EAAaJ,CAAI,EAClDO,EAAaF,CAAM,EACnBJ,EAAS,QAAO,CACnB,OAAQO,EAAP,CACE,QAAQ,MAAM,8BAA+BA,CAAK,CACrD,CACL,CAAC,EAED,eAAeF,EAAYG,EAAOT,EAAM,CACpC,MAAMU,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACJ,IAAKf,EACL,EAAGa,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMT,EACN,SAAU,EACb,CACT,CAAK,EAED,OAAIU,EAAS,KAAK,YAAc,GAC5BE,EAAS,OAAO,QAAQ,0EAA0E,EAClGC,IACO,KAGXD,EAAS,OAAO,QAAQ,oBAAoBF,EAAS,KAAK,mBAAmB,EAC7EI,IAEOJ,EAAS,KAAK,KACzB,CAEA,SAASH,EAAaF,EAAQ,CACtBL,IAAS,IACTF,EAAQ,UAAY,IAGxBO,EAAO,QAASU,GAAU,CACtB,MAAMC,EAAOC,EAAgBF,CAAK,EAClCjB,EAAQ,YAAYkB,CAAI,CAChC,CAAK,EAEDF,IACAI,GACJ,CAEA,SAASD,EAAgBF,EAAO,CAC5B,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAU,IAAI,YAAY,EAE/B,MAAMG,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,IAAMJ,EAAM,aAChBI,EAAI,IAAMJ,EAAM,KAChBI,EAAI,QAAU,OAEd,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzC,OAAAA,EAAK,UAAU,IAAI,MAAM,EACzBA,EAAK,UAAY;AAAA,mDAC8BL,EAAM;AAAA,mDACNA,EAAM;AAAA,sDACHA,EAAM;AAAA,uDACLA,EAAM;AAAA,MAGzDC,EAAK,YAAYG,CAAG,EACpBH,EAAK,YAAYI,CAAI,EAErBA,EAAK,MAAM,QAAU,OACrBA,EAAK,MAAM,MAAQ,MACnBA,EAAK,MAAM,IAAM,MAEjBA,EAAK,MAAM,SAAW,OACtBA,EAAK,MAAM,UAAY,SAEhBJ,CACX,CAEA,SAASF,GAAqB,CAC1Bf,EAAY,MAAM,QAAU,OAChC,CAEA,SAASc,GAAqB,CAC1Bd,EAAY,MAAM,QAAU,MAChC,CAEA,SAASmB,GAAmB,CACL,SAAS,iBAAiB,aAAa,EAE/C,QAASF,GAAS,CACzB,MAAMG,EAAMH,EAAK,cAAc,KAAK,EAC9BK,EAAiBL,EAAK,YAE5BG,EAAI,MAAM,MAAQE,EAAiB,IAC3C,CAAK,CACL"}